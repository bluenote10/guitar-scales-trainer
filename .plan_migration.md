# Dependency Upgrade Plan

This plan upgrades the project in safe, verifiable increments. After each stage, we will validate with:

- npm run check
- npm run lint
- npm run build
- npm run preview
- npm run test

All work should be done on a feature branch. Target Node 20.x LTS (or 22.x).

## Stage 0: Baseline Snapshot

- npm ci
- Run all validation commands and document current green state.

## Stage 1: Safe patch/minor updates within current majors

- Refresh to latest patch/minor versions (no framework major bumps):
  - svelte 3.x, @sveltejs/kit 1.x, @sveltejs/adapter-static 2.x
  - vite 4.x
  - tailwind 3.x (minor), postcss 8.x (minor), autoprefixer 10.x (minor)
  - eslint 8.x, prettier 2.x, svelte-check 3.x, vitest 0.x (latest minor)
- Validate: check, lint, build, preview, test.

## Stage 2: App-agnostic libraries

- Update independent libraries to latest within their current majors (or majors known to be compatible):
  - classnames 2.x
  - @fontsource/\* latest 4.x (keep 4.x for now; revisit 5.x later if needed)
  - @svelte-put/shortcut 1.x
  - flowbite and flowbite-svelte: update within their current majors only; postpone major if it requires Svelte 4/5.
- Validate: check, lint, build, preview, test.

## Stage 3: Core tooling (pre-migration compatible)

- TypeScript → 5.x
- Vitest → 1.x/2.x
- tailwindcss → 3.4.x (if not already)
- postcss/autoprefixer → latest
- svelte-check → latest 3.x
- Validate.

## Stage 4: SvelteKit 1 → 2 and Vite 5

- @sveltejs/kit → 2.x
- @sveltejs/adapter-static → 3.x
- vite → 5.x
- Keep existing `svelte.config.js` (adapter-static and `paths.base` for GitHub Pages).
- Validate.

## Stage 5: Svelte 3 → 4

- svelte → 4.x
- Keep `svelte-preprocess` and `vitePreprocess`.
- Validate.

## Stage 6: Svelte 4 → 5 (compatibility mode)

- svelte → 5.x (no runes refactor yet)
- Keep preprocess for PostCSS.
- Validate.

## Stage 7: Linting/Formatting modernization

- ESLint → 9.x (flat config) and migrate to `eslint-plugin-svelte`.
- Prettier → 3.x and `prettier-plugin-svelte` → 3.x.
- Replace `.eslintrc.cjs` with `eslint.config.js`.
- Validate and re-format.

## Stage 8: Optional Svelte 5 runes refactor

- Incremental refactors to the runes API.
- Validate.

## Stage 9: Cleanup

- Remove unused deps (e.g., `svelte-preprocess` if no longer needed beyond PostCSS).
- Update README and CI.
